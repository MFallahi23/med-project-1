---
const faqItems = [
  {
    question: "  Qui peut consulter une diététicienne nutritionniste ?",
    response: `Toute personne souhaitant mieux comprendre son alimentation et
              adopter de bonnes habitudes peut consulter : adultes, adolescents
              et enfants. Que ce soit pour des questions de bien-être,
              d’équilibre alimentaire ou sur recommandation d’un médecin
              (généraliste, cardiologue, endocrinologue, gynécologue,
              orthophoniste, psychothérapeute, etc.), Amine El Farissi est là
              pour vous accompagner. Son rôle est de vous aider à prévenir
              certains problèmes de santé ou à améliorer votre état général
              grâce à une alimentation adaptée. Une consultation unique peut
              suffire pour faire le point sur vos besoins nutritionnels,
              notamment en cas de transition alimentaire (régime végétarien,
              reprise du sport, etc.). Si vous souhaitez un accompagnement plus
              approfondi, un suivi personnalisé peut être mis en place,
              notamment dans le cadre d’une perte de poids ou d’une pathologie.
              Enfin, si votre enfant rencontre des difficultés liées à son
              alimentation (surpoids, allergies, diabète, reflux
              gastro-œsophagien…), une consultation pédiatrique peut vous aider
              à adopter les bons réflexes pour préserver sa santé.`,
  },
  {
    question:
      "Comment se passe un premier rdv chez un(e) diététicien(ne) nutritionniste ?",
    response: `Que ce soit en cabinet ou en visioconférence, le premier rendez-vous est avant tout une séance d’échange pour mieux vous connaître. Nous prendrons le temps d’aborder vos antécédents médicaux, vos habitudes alimentaires et vos objectifs diététiques.
Cette consultation dure environ une heure afin d’identifier vos besoins et, si nécessaire, déconstruire certaines idées reçues sur l’alimentation. Mon rôle est de vous accompagner dans la mise en place de bases nutritionnelles adaptées à votre mode de vie.
À l’issue de ce rendez-vous, vous recevrez un bilan personnalisé comprenant un rappel des objectifs définis ensemble ainsi que des recommandations adaptées. Si besoin, je vous fournirai également des fiches et documents complémentaires.
Que votre démarche concerne une perte de poids, la gestion d’une maladie métabolique, un régime spécifique ou une étape importante de votre vie (grossesse, allaitement, ménopause…), je m’adapte à vos besoins et à votre rythme.
Je vous reçois à mon cabinet à Casablanca dans un cadre bienveillant pour vous guider vers une alimentation qui vous convient et qui respecte votre santé.
`,
  },
  {
    question:
      "Une consultation avec un(e) diététicien(ne) nutritionniste est-elle remboursée par la sécu ?",
    response:
      "Non, les consultations avec un(e) diététicien(ne) nutritionniste ne sont pas remboursées par la sécurité sociale. Cependant, de nombreuses mutuelles proposent un remboursement partiel ou total des consultations, en fonction de l'option choisie. N'hésitez pas à vous renseigner auprès de votre mutuelle pour plus de détails. Je vous fournirai une facture à transmettre à votre mutuelle pour le remboursement.",
  },
  {
    question: "Quel régime pour perdre du poids ?",
    response: `Il n'existe pas de régime miracle qui peut être transposé à toutes et tous. Vous êtes unique, votre corps à un fonctionnement et une histoire personnels et il serait dommageable de ne pas en tenir compte. Le rôle du diététicien est de prendre en compte vos particularités physiques, psychiques et votre mode de vie pour vous proposer un régime personnalisé conçu spécialement pour vous. Ce régime tiendra compte également de vos pathologies éventuelles et de vos goûts alimentaires.
Un(e) diététicien(ne) qui à l'issue de la consultation vous donne une feuille déjà préparée avec un régime standard est à éviter. Il ne vous aura pas écouté, n'aura pas pris en compte votre personnalité et vous aurez de grandes chances de vous retrouver à devoir appliquer un régime qui n'est pas fait pour vous et que vous aurez du mal à suivre.
Retrouver la ligne ne doit pas être quelque chose qui met votre santé en danger, c'est pourquoi appliquer des régimes alimentaires trouvés sur internet peut s'avérer dangereux : ils ne tiendront pas compte des médicaments que vous prenez peut être, de votre âge, de votre poids initial, de votre métabolisme, de votre pratique sportive, de vous éventuels troubles alimentaires... et ne permettent pas dans la majorité des cas de comprendre les bases de l'alimentation équilibrée qui vous est pourtant nécessaire pour stabiliser votre poids et garder votre ligne sur le long terme en évitant l'effet yo-yo.`,
  },
];
---

<section class="faq">
  <div class="container">
    <div class="faq__wrapper">
      <h2 class="faq__title">Vos questions Diet'</h2>
      <ul class="faq__list">
        {
          faqItems.map((item) => {
            return (
              <li class="faq__item">
                <div class="faq__entry">
                  <button class="faq__btn">
                    <svg
                      class="faq__icon"
                      width="30"
                      height="30"
                      aria-hidden="true"
                    >
                      <use xlink:href="images/sprite.svg#icon-arrow-up" />
                    </svg>
                    <h3 class="faq__question">{item.question}</h3>
                  </button>
                  <div class="faq__response">{item.response}</div>
                </div>
              </li>
            );
          })
        }
      </ul>
    </div>
  </div>
</section>

<script>
  const faqBtns: NodeListOf<HTMLElement> =
    document.querySelectorAll(".faq__btn");

  faqBtns.forEach((faqBtn) => {
    faqBtn.addEventListener("click", function (e) {
      const iconEl: HTMLElement | null = faqBtn.querySelector(".faq__icon");
      const responseEl: HTMLElement | null =
        faqBtn.nextElementSibling as HTMLElement;
      if (iconEl && responseEl) {
        closeAllFaqs(iconEl, responseEl);
      }

      iconEl?.classList.toggle("faq__icon--active");
      responseEl?.classList.toggle("faq__response--active");
    });
  });

  const closeAllFaqs = (openIcon: HTMLElement, openResponse: HTMLElement) => {
    const responseEls: NodeListOf<Element> =
      document.querySelectorAll(".faq__response");
    const iconEls: NodeListOf<Element> =
      document.querySelectorAll(".faq__icon");

    responseEls.forEach((responseEl) => {
      if (
        responseEl.classList.contains("faq__response--active") &&
        responseEl !== openResponse
      )
        responseEl.classList.remove("faq__response--active");
    });

    iconEls.forEach((iconEl) => {
      if (iconEl.classList.contains("faq__icon--active") && iconEl !== openIcon)
        iconEl.classList.remove("faq__icon--active");
    });
  };
</script>
